<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Glow Up Analyzer</title>

  <style>
    body {
      font-family: system-ui, Arial;
      max-width: 700px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
    }

    h2 {
      text-align: center;
      margin-bottom: 25px;
    }

    .box {
      border: 2px dashed #ccc;
      padding: 30px;
      border-radius: 12px;
      text-align: center;
      margin-bottom: 25px;
    }

    button {
      background: #b87b6b;
      color: white;
      padding: 12px 22px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 12px;
    }

    button:hover {
      opacity: .9;
    }

    #result {
      margin-top: 30px;
    }

    #photoResult img {
      max-width: 100%;
      border-radius: 12px;
      margin-top: 15px;
    }

    .download {
      display: inline-block;
      margin-top: 10px;
      font-size: 14px;
    }
  </style>
</head>


<body>

<h2>Your Personalized Glow Up Plan ðŸ’•</h2>


<!-- ========================= -->
<!-- Upload box -->
<!-- ========================= -->
<div class="box">
  <input type="file" id="imageInput" accept="image/*" />
  <br>
  <button onclick="analyze()">Analyze My Photo</button>
</div>


<!-- ========================= -->
<!-- AI results appear here -->
<!-- ========================= -->
<div id="result"></div>


<!-- ========================= -->
<!-- Glow-up photo appears here -->
<!-- ========================= -->
<div id="photoResult"></div>



<script>

const WORKER_URL = "https://lwfs-glowup.lisa-668.workers.dev"; // keep yours here


// ==================================
// ANALYZE PHOTO (text advice)
// ==================================
async function analyze() {

  const file = document.getElementById("imageInput").files[0];
  if (!file) return alert("Please upload a photo first");

  const formData = new FormData();
  formData.append("image", file);

  document.getElementById("result").innerHTML = "Analyzing your photoâ€¦ please wait ðŸ’•";
  document.getElementById("photoResult").innerHTML = "";

  const res = await fetch(WORKER_URL, {
    method: "POST",
    body: formData
  });

  const html = await res.text();

  // show AI advice (with embedded affiliate links)
  document.getElementById("result").innerHTML =
    html +
    `
    <div style="text-align:center;margin-top:35px;">
      <button onclick="glowUp()">âœ¨ See My Glow-Up Photo</button>
    </div>
    `;
}



// ==================================
// GLOW UP PHOTO
// ==================================
async function glowUp() {

  const file = document.getElementById("imageInput").files[0];
  if (!file) return;

  const fd = new FormData();
  fd.append("image", file);

  const photoDiv = document.getElementById("photoResult");
  photoDiv.innerHTML = "Creating your glow-upâ€¦ âœ¨";

  const res = await fetch(WORKER_URL + "/glowup", {
    method: "POST",
    body: fd
  });

  const data = await res.json();

  const imgUrl = data.data[0].url;

  photoDiv.innerHTML =
    `
    <h3 style="margin-top:40px;">âœ¨ Your Glow-Up Preview</h3>
    <img src="${imgUrl}">
    <br>
    <a class="download" href="${imgUrl}" target="_blank" download>
      Download Photo
    </a>
    `;
}

</script>


</body>
</html>


