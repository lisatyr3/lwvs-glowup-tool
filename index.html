<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Glow Up Analyzer</title>

  <style>
    body {
      font-family: system-ui, Arial;
      max-width: 720px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
    }

    .box {
      border: 2px dashed #ccc;
      padding: 30px;
      border-radius: 12px;
      text-align:center;
    }

    button {
      background:#b87b6b;
      color:white;
      padding:12px 22px;
      border:none;
      border-radius:8px;
      font-size:16px;
      cursor:pointer;
      margin-top:15px;
    }

    #result, #glowupResult {
      margin-top:30px;
    }

    img {
      max-width:100%;
      border-radius:12px;
      margin-top:20px;
    }

    a {
      color:#b87b6b;
      font-weight:600;
      text-decoration:none;
    }
  </style>
</head>

<body>

<h2 style="text-align:center">Personalized Glow-Up Advice ðŸ’•</h2>

<div class="box">
  <input type="file" id="imageInput" accept="image/*"/>
  <br>
  <button onclick="upload()">Analyze My Photo</button>
</div>

<div id="result"></div>

<div style="text-align:center;">
  <button onclick="glowUp()">âœ¨ See My Glow-Up Photo</button>
</div>

<div id="glowupResult"></div>


<script>

const WORKER = "https://lwfs-glowup.lisa-668.workers.dev";


/* --------------------------
   ANALYZE PHOTO (TEXT + LINKS)
--------------------------- */
async function upload() {

  const file = document.getElementById("imageInput").files[0];
  if (!file) return alert("Please upload a photo first ðŸ’•");

  const formData = new FormData();
  formData.append("image", file);

  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "Analyzing your photoâ€¦";

  const res = await fetch(WORKER, {
    method: "POST",
    body: formData
  });

  const html = await res.text();

  resultDiv.innerHTML = html;
}



/* --------------------------
   GLOW UP IMAGE
--------------------------- */
async function glowUp() {

  const file = document.getElementById("imageInput").files[0];
  if (!file) return alert("Upload a photo first ðŸ’•");

  const formData = new FormData();
  formData.append("image", file);

  const glowDiv = document.getElementById("glowupResult");
  glowDiv.innerHTML = "Creating your glow-upâ€¦ âœ¨";

  const res = await fetch(WORKER + "/glowup", {
    method: "POST",
    body: formData
  });

  const blob = await res.blob();

  const imgURL = URL.createObjectURL(blob);

  glowDiv.innerHTML = `
    <h3>Your Glow-Up Preview</h3>
    <img src="${imgURL}">
    <br>
    <a href="${imgURL}" download="glowup.jpg">
      Download Your Image
    </a>
  `;
}

</script>

</body>
</html>



