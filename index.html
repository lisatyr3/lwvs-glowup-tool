<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Glow Up Analyzer</title>

  <style>
    body {
      font-family: system-ui, Arial;
      max-width: 720px;
      margin: 40px auto;
      padding: 20px;
      text-align: center;
      background: #fafafa;
    }

    .box {
      border: 2px dashed #ccc;
      padding: 30px;
      border-radius: 14px;
      background: white;
    }

    button {
      background: #b87b6b;
      color: white;
      padding: 12px 22px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 15px;
    }

    .glow-btn {
      background: #6d7fb5;
      font-size: 18px;
      padding: 14px 26px;
      border-radius: 10px;
      margin-top: 35px;
    }

    #result {
      margin-top: 40px;
      text-align: left;
    }

    #glowPreview {
      margin-top: 40px;
      display: none;
      text-align: center;
    }

    #glowPreview img {
      max-width: 350px;
      border-radius: 14px;
      margin-top: 15px;
    }
  </style>
</head>


<body>

<h2>Your Personalized Glow-Up Plan âœ¨</h2>

<div class="box">
  <input type="file" id="imageInput" accept="image/*" />
  <br/>

  <button onclick="upload()">Analyze My Photo</button>
</div>

<div id="result"></div>

<div id="glowPreview">
  <h2>Your Glow-Up Preview âœ¨</h2>
  <img id="glowImage" />
  <br/>
  <a id="downloadBtn" download="my-glow-up.png">
    <button style="background:#3b6b3f">Download My Glow-Up Photo</button>
  </a>
</div>


<script>

let lastFile = null;


// ========================
// Upload & Analyze
// ========================
async function upload() {

  const file = document.getElementById("imageInput").files[0];
  if (!file) return alert("Please upload a photo first");

  lastFile = file;

  const formData = new FormData();
  formData.append("image", file);

  const resultDiv = document.getElementById("result");

  resultDiv.innerHTML = "Analyzing your photo... please wait ðŸ’•";

  const res = await fetch("https://lwfs-glowup.lisa-668.workers.dev", {
    method: "POST",
    body: formData
  });

  const text = await res.text();

  // show AI analysis
  resultDiv.innerHTML = text;


  // ========================
  // ADD BUTTON AT BOTTOM
  // ========================
  resultDiv.innerHTML += `
    <div style="text-align:center;">
      <button class="glow-btn" onclick="glowUp()">
        âœ¨ See Your Glow-Up Photo
      </button>
    </div>
  `;

  // auto scroll to bottom (nice UX)
  window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
}



// ========================
// Glow-Up Preview
// (temporary demo version)
// ========================
async function glowUp() {

  if (!lastFile) return;

  // for now just preview original image
  // next step we'll generate AI makeover

  const reader = new FileReader();

  reader.onload = function(e) {
    document.getElementById("glowPreview").style.display = "block";
    document.getElementById("glowImage").src = e.target.result;
    document.getElementById("downloadBtn").href = e.target.result;

    window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
  };

  reader.readAsDataURL(lastFile);
}

</script>

</body>
</html>


